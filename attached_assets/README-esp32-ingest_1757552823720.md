# ESP32 Sensor Data Ingestion System

This system integrates your ESP32 and other sensors with the **Harmonic Unification Framework (HUF)** and **Weyl State Machine (WSM)** for real-time sensor data analysis and harmonic pattern recognition.

## Features

- **Real-time sensor data ingestion** from ESP32 and other devices
- **Harmonic analysis** using your HUF framework principles
- **Weyl State classification** (stable, oscillating, chaotic)
- **Quantum resonance calculation** based on sensor patterns
- **RESTful API** for data access and analysis
- **Persistent logging** in NDJSON format

## Quick Start

### 1. Install Dependencies
```bash
pip install -r requirements.txt
```

### 2. Start the Server
```bash
python ingest_server.py
```

The server will run on `http://localhost:5000`

### 3. Test the System
```bash
# Health check
curl http://localhost:5000/health

# Send test sensor data
curl -X POST http://localhost:5000/ingest \
  -H "Content-Type: application/json" \
  -d '{
    "device_id": "esp32_test",
    "temperature": 23.5,
    "humidity": 45.2,
    "pressure": 1013.25,
    "light": 850
  }'
```

## API Endpoints

### Core Endpoints

- `GET /health` - Server health check
- `POST /ingest` - Send sensor data (main endpoint)
- `GET /recent?n=50` - Get recent sensor readings
- `GET /devices` - List connected devices

### Harmonic Analysis Endpoints

- `GET /harmonic/recent?n=50` - Get recent harmonic analysis
- `GET /harmonic/stats` - Get harmonic statistics and Weyl state distribution

## ESP32 Firmware Integration

The system expects JSON data in this format:
```json
{
  "device_id": "esp32_001",
  "temperature": 23.5,
  "humidity": 45.2,
  "pressure": 1013.25,
  "light": 850,
  "motion": false,
  "custom_sensor": 123.45
}
```

## Harmonic Analysis

The system automatically performs harmonic analysis on incoming sensor data:

- **Harmonic Frequency**: Based on temperature variations
- **Amplitude Modulation**: Based on humidity patterns  
- **Phase Coherence**: Based on pressure stability
- **Quantum Resonance**: Based on sensor diversity
- **Weyl State**: Classified as stable, oscillating, or chaotic

## Data Storage

- **Raw sensor data**: `sensor_data_log.ndjson`
- **Harmonic analysis**: `harmonic_analysis_log.ndjson`

Both files use NDJSON format for easy processing and analysis.

## Integration with Your Framework

This system implements basic principles from your **Harmonic Unification Framework**:

1. **Multi-modal harmonic signature** analysis
2. **Quantum-Hybrid Processing** for sensor data
3. **Weyl State Machine** classification
4. **Persistent Harmonic Ledger** for data storage

## Next Steps

1. **Flash ESP32 firmware** (see `esp32_firmware.ino`)
2. **Configure sensor types** based on your specific hardware
3. **Integrate with your VM ecosystem** for advanced processing
4. **Connect to your blockchain system** for data immutability
5. **Implement AGI-driven analysis** using your WSM principles

## Example Sensor Data

```json
{
  "device_id": "esp32_harmonic_001",
  "timestamp": 1703123456789,
  "temperature": 23.5,
  "humidity": 45.2,
  "pressure": 1013.25,
  "light": 850,
  "motion": false,
  "sound_level": 42.1,
  "vibration": 0.05,
  "magnetic_field": 25.3
}
```

The system will automatically analyze this data and return harmonic analysis results including the current Weyl state classification.
